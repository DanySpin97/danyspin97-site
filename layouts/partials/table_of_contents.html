{{/* https://gist.github.com/skyzyx/a796d66f6a124f057f3374eff0b3f99a */}}
{{/* https://github.com/gohugoio/hugo/issues/1778 */}}

{{/* ignore empty links with + */}}
{{ $headers := findRE "<h[2-4].*?>(.|\n])+?</h[2-4]>" .Content }}
{{ .Scratch.Set "last_level" 1 }}

{{ if (gt .WordCount 400 ) }}
{{/* at least one header to link to */}}
{{ $has_headers := ge (len $headers) 1 }}
{{ if $has_headers }}
<aside class="toc">
     <details>
    <summary>
    <b>Table of Contents</b>
    </summary>
    {{ .TableOfContents }}
</aside>
</br>
{{ end }}
{{ end }}
